---
title: 终端
categories: 工具
---

1. github clone 提速
	
	在 [IPAddress.com](https://www.ipaddress.com/) 网站中中分别查询 ``https://www.github.com`` 和 ``github.global.ssl.fastly.net`` 域名的 IP 地址。
	
		<center>
		![](http://dzliving.com/GithubIPSearch.png)
		![](http://dzliving.com/GithubIP.png)
		![](http://dzliving.com/GithubSSLIP.png)
		</center>
	
	打开的 hosts 文件
	
	【Windows】
	
	```
	C:\Windows\System32\drivers\etc\host
	```
	
	【Mac】
	
	```
	$ sudo vi /etc/hosts
	```
	
	<center>
	![](http://dzliving.com/ViHosts.png)
	![](http://dzliving.com/EditHosts.png)
	</center>
	
	[更多阅读](https://www.jianshu.com/p/8577c9401fe1)

2. 重启 Finder 进程

	```
	~ $ killall Finder
	```

3. 修改图片

	```
	$ sips -s format png *.* --out pngs
	```

4. 查看库文件所支持的 CPU 指令集类型

	```
	$ lipo -info /Users/dubinbin/Library/Developer/Xcode/DerivedData/CYKJMain-ezknfrqnezcdzyapkvyqozvovtmj/Build/Products/Debug-iphonesimulator/AFNetworking/AFNetworking.framework/AFNetworking 
Non-fat file: /Users/dubinbin/Library/Developer/Xcode/DerivedData/CYKJMain-ezknfrqnezcdzyapkvyqozvovtmj/Build/Products/Debug-iphonesimulator/AFNetworking/AFNetworking.framework/AFNetworking is architecture: x86_64
	```
	
5. 查看库文件类型

	```
	$ file /Users/dubinbin/Library/Developer/Xcode/DerivedData/CYKJMain-ezknfrqnezcdzyapkvyqozvovtmj/Build/Products/Debug-iphonesimulator/AFNetworking/AFNetworking.framework/AFNetworking
/Users/dubinbin/Library/Developer/Xcode/DerivedData/CYKJMain-ezknfrqnezcdzyapkvyqozvovtmj/Build/Products/Debug-iphonesimulator/AFNetworking/AFNetworking.framework/AFNetworking: Mach-O 64-bit dynamically linked shared library x86_64
	```
	
6. mac 安装软件允许任何来源

	```
	$ sudo spctl --master-disable  // 开启
	$ sudo spctl --master-enable   // 关闭
	```
	
7. clang -rewrite-objc
clang -rewrite-objc 是把 oc 代码转成 c/c++ 代码，常用它来窥探 OC 的底层实现。

/*  MyObject.m  */
#import "MyObject.h"

@implementation MyObject

@end
打开终端 cd 到 MyObject.m 所在目录，执行如下命令：

$ cd Desktop/Demo/Demo
$ clang -rewrite-objc MyObject.m
执行之后，目录下多出一个名为 MyObject.cpp 的 C++ 语言文件，可以打开看具体实现。

1、指定 SDK

有的 oc 代码在转成 c 代码时，在真机和模拟器上差别还是挺大的。如果需要指定 SDK，那么要结合 xcrun 命令。

// 查看机器上装有的的 sdk
~ $ xcodebuild -showsdks

// 真机
xcrun -sdk iphoneos clang -rewrite-objc main.m

// 模拟器
xcrun -sdk iphonesimulator clang -rewrite-objc main.m

// 指定 SDK 版本
xcrun -sdk iphonesimulator11.2 clang -rewrite-objc main.m
[图片上传失败...(image-964150-1570242002989)]

2、指定 framework

/*  MyObject.m  */
#import "MyObject.h"
#import <UIKit/UIKit.h>

@implementation MyObject

@end
.m 文件中引入了 UIKit.framework，运行 clang -rewrite-objc。

[图片上传失败...(image-df0c91-1570242002989)]

忘了引入 UIKit.framework，clang 不知到何处去找，这时需要用 -F 开关告诉它

xcrun -sdk iphonesimulator clang -rewrite-objc -F /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/System/Library/Frameworks/UIKit.framework MyObject.m
执行命令后成功了。实际上可以同时指定多个源文件、多个 framework。

[图片上传失败...(image-3ee45c-1570242002989)]

3、.h 文件

.h 文件执行 clang 转换后生成一个 .gch 的文件。

/*  MyObject.h  */
#import <Foundation/Foundation.h>

@interface MyObject : NSObject
{
    int val0;
    int val1;
}
@end
[图片上传失败...(image-df90e4-1570242002989)]
[图片上传失败...(image-7d4333-1570242002989)]

报错是因为没有使用 iphoneOS.sdk。