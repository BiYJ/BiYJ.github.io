---
title: 进程、线程
categories: iOS多线程
---

## 一、进程

- 进程就是一个正在运行的一个应用程序;
- 每一个进度都是独立的，每一个进程均在专门且手保护的内存空间内;
- 在 linux 系统中，想要新开启一个进程是一件非常简单的事情只需要一句话：fork()，在 fork() 之后就会包含两个进程，此时可以根据返回的 PID 来判断是子进程还是父进程；
- iOS 是一个非常封闭的系统，每一个 App（一个进程）都有自己独特的内存和磁盘空间，别的 App（进程）是不允许访问的（越狱不在讨论范围）；


## 二、线程

- 线程是 CPU 调度的最小单元；
- 线程的作用：执行 app 的代码；
- 一个进程（App）至少有一个线程，这个进程叫做主线程；

## 三、线程和进程的关系

- 进程为应用程序开辟内存空间；
- 线程执行应用程序的代码；
- 进程是由线程组成的，一个进程至少有一个主线程，理论上可以有很多个线程。


## 四、为什么要使用多线程

1. 方便的通信和数据交换

	多进程程序结构和多线程程序结构有很大的不同;
	
	对不同进程来说，它们具有独立的数据空间，要进行数据的传递只能通过通信的方式进行，这种方式不仅费时，而且很不方便。线程则不然，由于同一进程下的线程之间共享数据空间，所以一个线程的数据可以直接为其它线程所用，这不仅快捷，而且方便。

2. 更高效的利用 CPU

	大多数操作系统是根据时间片轮转调度，在 Linux/Unix 中，CPU 的调度时间是 100ms；而线程是 CPU 最小的调度单元，也就是说当开启一个新线程时，CPU 在自己的调度链表中去循环调度这个线程；如果一个线程没有，那么 CPU 就会休息；所以说，多线程能够适当提高 CPU 的利用率！当然 CPU 调用时并非这么简单，其中会包含调度的优先级、中断等来保证 CPU 调度是优化的！
	
	所以，在讨论为什么要使用多线程时，如果不说针对多进程而言是那就是没有了参考对象。

3. 当然，程序中并非开启越多的线程越好，首先线程需要消耗内存，主线程 1M、子线程是 512K；

	其次，线程越多，CPU 的线程链表就越长，执行效率会变慢！适当的利用多线程！在 iOS 中，苹果公司也为我们封装一个类 ``NSOperation``。