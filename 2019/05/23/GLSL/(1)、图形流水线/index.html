<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>GLSL：图形流水线 | D</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style-dark.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight-dark.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">GLSL：图形流水线</h1><a id="logo" href="/.">D</a><p class="description">While there is life there is hope</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">GLSL：图形流水线</h1><div class="post-meta"><a href="/2019/05/23/GLSL/(1)、图形流水线/#comments" class="comment-count"></a><p><span class="date">May 23, 2019</span><span><a href="/categories/OpenGL/" class="category">OpenGL</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="一、流水线概述"><a href="#一、流水线概述" class="headerlink" title="一、流水线概述"></a>一、流水线概述</h2><p>下图描述了一个简化的图形处理流水线，展示了着色器编程（shader programming）的一些重要概念。</p>
<center><br><img src="http://dzliving.com/GLSL_1.png" alt><br></center>

<p>一个固定流水线包括如下功能： </p>
<h4 id="1-1-顶点变换（Vertex-Transformation）"><a href="#1-1-顶点变换（Vertex-Transformation）" class="headerlink" title="1.1 顶点变换（Vertex Transformation）"></a>1.1 顶点变换（Vertex Transformation）</h4><blockquote>
<p>一个顶点是一个信息集合，包括空间中的位置、顶点的颜色、法线、纹理坐标等。 </p>
</blockquote>
<p>此阶段的输入是独立的顶点信息。固定功能流水线在这一阶段通常进行如下工作：</p>
<ul>
<li>顶点位置变换</li>
<li>为每个顶点计算光照</li>
<li>纹理坐标的生成与变换 </li>
</ul>
<h4 id="1-2-图元组合和光栅化（Primitive-Assembly-and-Rasterization）"><a href="#1-2-图元组合和光栅化（Primitive-Assembly-and-Rasterization）" class="headerlink" title="1.2 图元组合和光栅化（Primitive Assembly and Rasterization）"></a>1.2 图元组合和光栅化（Primitive Assembly and Rasterization）</h4><p>此阶段的输入是变换后的顶点和连接信息(connectivity information)。连接信息告诉流水线顶点如何组成图元(三角形、四边形等)。</p>
<p>此阶段还负责视景体(view frustum)裁剪和背面剔除。</p>
<p>光栅化决定了片断(fragment)以及图元的像素位置。这里的片断是指一块数据，用来更新帧缓存(frame buffer)中特定位置的一个像素。一个片断除了包含颜色，还有法线和纹理坐标等属性，这些信息用来计算新的像素颜色值。 </p>
<p>本阶段的输出包括：</p>
<ul>
<li>帧缓存中片断的位置</li>
<li>在顶点变换阶段计算出的信息对每个片断的插值</li>
</ul>
<p>这个阶段利用在顶点变换阶段算出的数据，结合连接信息计算出片断的数据。</p>
<p>例如，每个顶点包含一个变换后的位置，当它们组成图元时，就可以用来计算图元的片断 位置。另一个例子是使用颜色，如果多边形的每个顶点都有自己的颜色值，那么多边形内部片断的颜色值就是各个顶点颜色插值得到的。 </p>
<h4 id="1-3-片断纹理化和色彩化（Fragment-Texturing-and-Coloring）"><a href="#1-3-片断纹理化和色彩化（Fragment-Texturing-and-Coloring）" class="headerlink" title="1.3 片断纹理化和色彩化（Fragment Texturing and Coloring）"></a>1.3 片断纹理化和色彩化（Fragment Texturing and Coloring）</h4><p>此阶段的输入是经过插值的片断信息。在前一阶段已经通过插值计算了纹理坐标和一个颜色值，这个颜色在本阶段可以用来和纹理元素进行组合。 此外，这一阶段还可以进行雾化处理。通常最后的输出是片断的颜色值以及深度信息。 </p>
<h4 id="1-4-光栅操作（Raster-Operations）"><a href="#1-4-光栅操作（Raster-Operations）" class="headerlink" title="1.4 光栅操作（Raster Operations）"></a>1.4 光栅操作（Raster Operations）</h4><p>此阶段的输入：</p>
<ul>
<li>像素位置</li>
<li>片断深度和颜色值</li>
</ul>
<p>在这个阶段对片断进行一系列的测试，包括：·      剪切测试(scissor test)·       Alpha测试·       模版测试 ·       深度测试 如果测试成功，则根据当前的混合模式(blend mode)用片断信息来更新像素值。注意混合只能在此阶段进行，因为片断纹理化和颜色化阶段不能访问帧缓存。帧缓存只能在此阶段访问。 <strong>5、一幅图总结固定功能流水线（Visual Summary of the Fixed Functionality）</strong>下图直观地总结了上述流水线的各个阶段：<img src="http://hi.csdn.net/attachment/201107/8/0_1310133462o5WH.gif" alt> <strong>6、取代固定的功能（Replacing Fixed Functionality）</strong>现在的显卡允许程序员自己编程实现上述流水线中的两个阶段：·      顶点 shader 实现顶点变换阶段的功能·      片断 shader 替代片断纹理化和色彩化的功能 <strong>7、顶点处理器</strong>顶点处理器用来运行顶点 shader(着色程序)。顶点 shader 的输入是顶点数据，即位置、颜色、法线等。 下面的 OpenGL 程序发送数据到顶点处理器，每个顶点中包含一个颜色信息和一个位置信息。glBegin(…);glColor3f(0.2, 0.4, 0.6);glVertex3f(-1.0, 1.0, 2.0);glColor3f(0.2, 0.4, 0.8);glVertex3f(1.0, -1.0, 2.0);glEnd(); 一个顶点 shader 可以编写代码实现如下功能：·        使用模型视图矩阵以及投影矩阵进行顶点变换·        法线变换及归一化·        纹理坐标生成和变换·        逐顶点或逐像素光照计算·        颜色计算 不一定要完成上面的所有操作，例如你的程序可能不使用光照。但一旦你使用了顶点 shader，顶点处理器的所有固定功能都将被替换。所以你不能只编写法线变换的 shader 而指望固定功能帮你完成纹理坐标生成。 从上一节已经知道，顶点处理器并不知道连接信息，因此这里不能执行拓扑信息有关的操作。比如顶点处理器不能进行背面剔除，它只是操作顶点而不是面。 顶点 shader 至少需要一个变量：gl_Position，通常要用模型视图矩阵以及投影矩阵进行变换。顶点处理器可以访问 OpenGL 状态，所以可以用来处理材质和光照。最新的设备还可以访问纹理。 <strong>8、片断处理器</strong>片断处理器可以运行片断 shader，这个单元可以进行如下操作：·        逐像素计算颜色和纹理坐标·        应用纹理·        雾化计算·        如果需要逐像素光照，可以用来计算法线 片断处理器的输入是顶点坐标、颜色、法线等计算插值得到的结果。在顶点 shader 中对每个顶点的属性值进行了计算，现在将对图元中的每个片断进行处理，因此需要插值的结果。 如同顶点处理器一样，当你编写片断 shader 后，所有固定功能将被取代，所以不能使用片断 shader对片断材质化，同时用固定功能进行雾化。程序员必须编写程序实现需要的所有效果。 片断处理器只对每个片断独立进行操作，并不知道相邻片断的内容。类似顶点 shader，我们必须访问OpenGL 状态，才可能知道应用程序中设置的雾颜色等内容。 一个片断shader有两种输出：·        抛弃片断内容，什么也不输出·        计算片断的最终颜色 gl_FragColor，当要渲染到多个目标时计算 gl_FragData。 还可以写入深度信息，但上一阶段已经算过了，所以没有必要。 需要强调的是片断 shader 不能访问帧缓存，所以混合(blend) 这样的操作只能发生在这之后。</p>
<p><a href="https://www.cnblogs.com/mazhenyu/p/5580910.html" target="_blank" rel="noopener">【GLSL教程】（一）图形流水线 【转】</a> </p>
</div><div class="post-copyright"><blockquote><p>原文作者: BiYJ</p><p>原文链接: <a href="http://yoursite.com/2019/05/23/GLSL/(1)、图形流水线/">http://yoursite.com/2019/05/23/GLSL/(1)、图形流水线/</a></p><p>版权声明: 转载请注明出处(必须保留原文作者署名原文链接)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/05/23/数据结构/sql/" class="pre">Sql</a><a href="/2019/05/23/GLSL/(9)、其他/" class="next">【GLSL】九、其他</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、流水线概述"><span class="toc-text">一、流水线概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-顶点变换（Vertex-Transformation）"><span class="toc-text">1.1 顶点变换（Vertex Transformation）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-图元组合和光栅化（Primitive-Assembly-and-Rasterization）"><span class="toc-text">1.2 图元组合和光栅化（Primitive Assembly and Rasterization）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-片断纹理化和色彩化（Fragment-Texturing-and-Coloring）"><span class="toc-text">1.3 片断纹理化和色彩化（Fragment Texturing and Coloring）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-光栅操作（Raster-Operations）"><span class="toc-text">1.4 光栅操作（Raster Operations）</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/11/06/iOS/iOS原理/iOS UmbrellaFramework/">iOS UmbrellaFramework</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/06/iOS/iOS原理/iOS UmbrellaHeader/">iOS umbrella header</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/06/iOS/iOS媒体/iOS 图片/">iOS 图片</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/05/iOS/iOS优化/iOS 优化实例/">iOS 优化实例</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/05/iOS/iOS原理/iOS 操作系统架构/">iOS 操作系统架构</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/04/iOS/iOS架构/iOS 网络层设计/">iOS网络层设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/04/iOS/iOS原理/iOS 类簇/">iOS 类簇</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/04/iOS/iOS原理/iOS OCR/">iOS OCR</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/04/iOS/iOS原理/iOS IM/">iOS IM</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/30/iOS/iOS原理/iOS 推送/">iOS 推送</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GLSL/">GLSL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IT/">IT</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OpenGL/">OpenGL</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS优化/">iOS优化</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS动画/">iOS动画</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS原理/">iOS原理</a><span class="category-list-count">42</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS多线程/">iOS多线程</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS媒体/">iOS媒体</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS安全/">iOS安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS架构/">iOS架构</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据存储/">数据存储</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/">计算机网络</a><span class="category-list-count">5</span></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p> 
京ICP备 - <a target="_blank" href="http://www.beian.miit.gov.cn">19039713号</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">BiYJ.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>