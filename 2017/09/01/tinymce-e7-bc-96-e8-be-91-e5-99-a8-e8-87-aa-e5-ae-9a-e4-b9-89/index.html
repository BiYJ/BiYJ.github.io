<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title> TinyMCE 编辑器自定义		 | D</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style-dark.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight-dark.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden"> TinyMCE 编辑器自定义		</h1><a id="logo" href="/.">D</a><p class="description">While there is life there is hope</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title"> TinyMCE 编辑器自定义		</h1><div class="post-meta"><a href="/2017/09/01/tinymce-e7-bc-96-e8-be-91-e5-99-a8-e8-87-aa-e5-ae-9a-e4-b9-89/#comments" class="comment-count"></a><p><span class="date">Sep 01, 2017</span><span><a href="/categories/效率-工具/" class="category">效率 | 工具</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>一、添加字体选项框</p>
<p>WordPress 自带的 TinyMCE 编辑器没有字体选项框</p>
<p><img src="http://www.dzliving.com/wp-content/uploads/2017/09/mce3-300x14.png" alt></p>
<p>找到当前主题的 functions.php 文件</p>
<p><img src="http://www.dzliving.com/wp-content/uploads/2017/09/mce5-300x164.png" alt><br><img src="http://www.dzliving.com/wp-content/uploads/2017/09/mce4-300x68.png" alt></p>
<p>将以下代码添加到文件中：</p>
<p>function select_my_fontfamily($initArray) {</p>
<p>$initArray[‘font_formats’] = “宋体=’宋体’;仿宋=’仿宋’;楷体简=’KaiTi SC’;”;</p>
<p>return $initArray;</p>
<p>}<br>add_filter(‘tiny_mce_before_init’, ‘select_my_fontfamily’);</p>
<p>function show_more_buttons($buttons) {</p>
<p>$buttons[] = ‘styleselect’;<br>$buttons[] = ‘fontselect’;</p>
<p>return $buttons;</p>
<p>}<br>add_filter(“mce_buttons”, “show_more_buttons”);</p>
<p>结果如图：</p>
<p><img src="http://www.dzliving.com/wp-content/uploads/2017/09/mce1-300x14.png" alt></p>
<p>my_fontfamily 方法目的是选择字体，可以按照上面的结构(显示名=’字体font-family’;)自行选择，定义之后原先默认的字体就没有了。</p>
<p>show_more_buttons方法目的是显示字体选择框，默认是不显示的。</p>
<p>网站报错 500，php 文件报错：syntax error, unexpected T_RETURN<br>错误原因：文本中有中文字符，包括空格、小括号、大括号等。</p>
<p>二、添加字体大小及其他按钮</p>
<p>与添加字体框一样，在 show_more_buttons 方法中添加如下代码：</p>
<p>$buttons[] = ‘fontsizeselect’;<br>$buttons[] = ‘backcolor’;<br>$buttons[] = ‘underline’;</p>
<p>结果如图：</p>
<p><img src="http://www.dzliving.com/wp-content/uploads/2017/09/mce2-300x25.png" alt></p>
<p>可用的按钮：</p>
<p>加粗             bold                             斜体             italic                     下划线          underline<br>删除线         strikethrough       左对齐         justifyleft         居中              justifycenter<br>右对齐         justfyright            两端对齐     justfyfull           无序列表       bullist<br>编号列表     numlist                      减少缩进     outdent       缩进              indent<br>剪切             cut             复制             copy                          粘贴               paste<br>撤销             undo                             重做             redo                          插入超链接  link<br>取消超链接 unlink          插入图片     image                        清除格式      removeformat<br>帮助             wp_help                      打开HTML代码编辑器  code       水平线           hr<br>清除冗余代码    cleanup               格式选择     formmatselect    字体选择       fontselect<br>字号选择     fontsizeselect     样式选择     styleselect         上标               sub<br>下标             sup                               字体颜色      forecolor             字体背景色    backcolor<br>特殊符号     charmap                      隐藏按钮显示开关   wp_adv       隐藏按钮区起始部分  wp_adv_start<br>隐藏按钮区结束部分 wp_adv_end   锚文本     anchor                     新建文本       newdocument<br>插入more标签  wp_more                 插入分页标签    wp_page           拼写检查       spellchecker</p>
<p>三、更改编辑器默认视图为”文本”</p>
<p>进行写、编辑文章时，编辑器会自动跳转到”可视化”视图。</p>
<p><img src="http://www.dzliving.com/wp-content/uploads/2017/09/mce6-300x23.png" alt></p>
<p>对于一些 web 设计者或者经常要插入代码的人来说，可能更习惯使用”文本”视图编辑。要修改这个设定，只需要在当前主题的 functions.php 文件中添加以下代码：</p>
<p>add_filter(‘wp_default_editor’, create_function(‘’, ‘return “html”;’));</p>
<p>四、添加编辑器内可见的默认内容</p>
<p>写新的文章时，编辑器里的内容默认是空的。如果需要自动添加”文章名”、”作者”、”下载地址”等默认内容，需要在当前主题的 functions.php 文件中添加以下代码，而且这些预定义的内容，是可以手动删除的。</p>
<p>function addDefaultMsg($content) {<br>if(!is_feed() &amp;&amp; !is_home()) {<br>$content.= “这里的预定义的文章名、作者等默认内容”;<br>}<br>return $content;<br>}<br>add_filter (‘default_content’, ‘addDefaultMsg’);</p>
<p>五、添加编辑器内文末不可见的默认内容</p>
<p>这里添加的内容在编辑的时候是看不见的，发布后自动添加在内容的最后，用于添加订阅、文章版权信息等等。需要在当前主题的 functions.php文件添加以下代码：</p>
<p>function addFootMsg($content) {<br>if(!is_feed() &amp;&amp; !is_home()) {<br>$content.= “这里的预定义内容在编辑器不可见”;<br>}<br>return $content;<br>}<br>add_filter (‘the_content’, ‘addFootMsg’);</p>
<p>六、添加更多的 HTML 标签</p>
<p>因为 WordPress自带的TinyMCE编辑器会默认过滤掉不符合高版本 HTML中的html标签，所以请慎用。需要在当前主题的 functions.php 文件中添加以下代码：</p>
<p>function addMoreHTMLTags($initArray) {</p>
<p>$ext = ‘pre[id|name|class|style],iframe[align|longdesc| name|width|height|frameborder|scrolling|marginheight| marginwidth|src]‘;</p>
<p>if ( isset( $initArray[‘extended_valid_elements’] ) ) {<br>$initArray[‘extended_valid_elements’] .= ‘,’ . $ext;<br>}<br>else {<br>$initArray[‘extended_valid_elements’] = $ext;<br>}<br>return $initArray;<br>}<br>add_filter(‘tiny_mce_before_init’, ‘addMoreHTMLTags’);</p>
<p>格式为”标签1[属性1|…],标签2[属性1|属性2|…]“</p>
<p>七、WordPress 显示换行、回车问题</p>
<p>在 WordPress 网站后台编辑文章时，默认状态下，文章编辑器里的换行效果是不被解析的。经常有用户写文章时想分段空一个空白行出来，但保存后没有显示空白行。</p>
<p><strong>解决方法</strong> 1<strong>：</strong></p>
<p>在编辑文章时，把文章编辑器切换到 “文本” 模版，在需要空行的地方输入：<em><br></em>为 HTML 换行代码，加入这个代码后再发布就会显示一个空白行了。</p>
<p>该方法的最大的优点就是不需要对程序做任何修改，直接就能使用。但缺点就是你每次都要在 “可视化” 和 “文本” 模式下切换输入并接着发布，你一旦转入“ “可视化编辑器” 下编辑并发布以后，那么你以前做的工作就白费了，还得从头再来。</p>
<p><strong>解决方法</strong> 2：</p>
<p><strong>安装 </strong><a href="https://wordpress.org/plugins/tinymce-advanced/" target="_blank" rel="noopener">TinyMCE Advanced</a><strong> 插件</strong></p>
<p>TinyMCE Advanced 是一款用来增强和自定义 WordPress 默认编辑器 TinyMCE 的插件。</p>
<p>把 TinyMCE Advanced 插件安装启用后，在插件的设置页面下方，找到 stop removing the p and br tags when saving and show them in the HTML editor(不过滤文章中的 p 和 br 标签)这个选项，打上勾即可。</p>
<p><strong>TinyMCE Advanced 插件下载地址</strong>：<a href="http://wordpress.org/plugins/tinymce-advanced/" target="_blank" rel="noopener">http://wordpress.org/plugins/tinymce-advanced/</a></p>
<p><strong>v4.6.3 本地下载</strong>： <a href="http://www.dzliving.com/wp-content/uploads/2017/09/tinymce-advanced.4.6.3.zip" target="_blank" rel="noopener">tinymce-advanced.4.6.3</a></p>
<p>参考文章：<a href="https://www.wpdaxue.com/tinymce-custom-methods.html" target="_blank" rel="noopener">https://www.wpdaxue.com/tinymce-custom-methods.html</a><br>更多信息请查看：<a href="https://codex.wordpress.org/" target="_blank" rel="noopener">https://codex.wordpress.org/</a></p>
</div><div class="post-copyright"><blockquote><p>原文作者: BiYJ</p><p>原文链接: <a href="http://yoursite.com/2017/09/01/tinymce-e7-bc-96-e8-be-91-e5-99-a8-e8-87-aa-e5-ae-9a-e4-b9-89/">http://yoursite.com/2017/09/01/tinymce-e7-bc-96-e8-be-91-e5-99-a8-e8-87-aa-e5-ae-9a-e4-b9-89/</a></p><p>版权声明: 转载请注明出处(必须保留原文作者署名原文链接)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2017/09/03/e9-a1-b6-e7-82-b9-e7-bc-93-e5-ad-98-e5-af-b9-e8-b1-a1vbo/" class="pre"> 顶点缓存对象(VBO)		</a><a href="/2017/09/01/tree-e5-91-bd-e4-bb-a4/" class="next"> Tree 命令		</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/06/13/WKWebView/">WKWebView</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/iOS 编译过程原理(2)/">iOS 编译过程原理(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/BFPRT算法/">BFPRT 算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/全排列/">全排列</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/01-背包/">0-1 背包</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/直接插入排序/">直接插入排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/armv7、armv7s、arm64/">armv7、armv7s、arm64</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/Archives配置/">Archives 配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/App-Thinning/">App Thinning</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/23/AFNetworking/">AFNetworking</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AFNetworking/">AFNetworking</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flutter/">Flutter</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GLSL/">GLSL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Games/">Games</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Leetcode/">Leetcode</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MJRefresh/">MJRefresh</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac/">Mac</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OC/">OC</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OPENGL/">OPENGL</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactiveCocoa/">ReactiveCocoa</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SDWebImage/">SDWebImage</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpriteKit/">SpriteKit</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Xcode/">Xcode</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/内存管理/">内存管理</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/减治法/">减治法</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分治法/">分治法</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/动态规划/">动态规划</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/变治法/">变治法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/图像视频/">图像视频</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/多线程/">多线程</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习笔记/">学习笔记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工程发布/">工程发布</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/底层原理/">底层原理</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/性能优化/">性能优化</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/排序算法/">排序算法</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/效率-工具/">效率 | 工具</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据存储/">数据存储</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构设计/">架构设计</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法相关/">算法相关</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络编程/">网络编程</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/视图-amp-动画/">视图 &amp; 动画</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/">计算机网络</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计策略/">设计策略</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/阅读源码/">阅读源码</a><span class="category-list-count">8</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/排序算法/" style="font-size: 15px;">排序算法</a> <a href="/tags/动态规划/" style="font-size: 15px;">动态规划</a> <a href="/tags/分治法/" style="font-size: 15px;">分治法</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://www.liaoxuefeng.com/" title="廖雪峰的官方网站" target="_blank">廖雪峰的官方网站</a><ul></ul><a href="https://blog.ibireme.com/" title="ibireme" target="_blank">ibireme</a><ul></ul><a href="https://www.cnblogs.com/machao/" title="马在路上" target="_blank">马在路上</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">BiYJ.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>